<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}AI Background Generator{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Your global style.css -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="container mt-3">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<!-- HEADER -->
<div class="container">
    <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">

        <a href="{{ url_for('index') }}" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-decoration-none">
            <span class="fs-4"><b>AI Background Generator</b></span>
        </a>

        <ul class="nav nav-pills">

            <!-- Gallery link always visible -->
            <li class="nav-item">
                <a href="{{ url_for('gallery.gallery_home') }}" class="nav-link {% if active=='gallery' %}active{% endif %}">
                    <b>Gallery</b>
                </a>
            </li>

            {% if session.get('user_id') %}
                <!-- Logged in: show Sign out only -->
                <li class="nav-item">
                    <a href="{{ url_for('auth.logout') }}" class="nav-link">
                        <b>Sign out</b>
                    </a>
                </li>
            {% else %}
                <!-- Not logged in: show Sign-up and Login -->
                <li class="nav-item">
                    <a href="{{ url_for('auth.signup') }}" class="nav-link {% if active=='signup' %}active{% endif %}">
                        <b>Sign-up</b>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('auth.login') }}" class="nav-link {% if active=='login' %}active{% endif %}">
                        <b>Login</b>
                    </a>
                </li>
            {% endif %}

            <!-- Profile icon -->
            <li class="nav-item ms-3">
                {% if session.get('user_id') %}
                    <img src="{{ url_for('static', filename='images/logged.png') }}" width="32" height="32" class="rounded-circle">
                {% else %}
                    <img src="{{ url_for('static', filename='images/notlogged.png') }}" width="32" height="32" class="rounded-circle">
                {% endif %}
            </li>

        </ul>

    </header>
</div>

<!-- MAIN CONTENT BLOCK -->
<div class="container">
    {% block content %}
    {% endblock %}
</div>

<!-- FOOTER -->
<footer class="my-5 pt-5 text-body-secondary text-center text-small">
    <p class="mb-1">Â© 2025 Mira-Teodora Culda</p>
    <ul class="list-inline">
        <li class="list-inline-item"><a href="#">GitHub</a></li>
        <li class="list-inline-item"><a href="#">LinkedIn</a></li>
        <li class="list-inline-item"><a href="#">Portfolio</a></li>
    </ul>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

<!-- Page-specific scripts -->
{% block scripts %}{% endblock %}

</body>
</html>
